setTimeout(function() {
  // If bootstrap stylesheet failed to load, use local fallback
  if ($('body').css('color') != 'rgb(51, 51, 51)') {
    var link_template = '<link rel="stylesheet" href="X">';
    var x = IR.posts;
    $('head')
      .append(link_template.replace('X', x.assets_url + 'bootstrap/css/bootstrap.min.css'))
      .append(link_template.replace('X', x.base_url + 'site.min.css'));
  }
}, 1000);

// Rewrite modal content
function rewrite_modal($modal, title, body) {
  var $modal_title = $modal.find('.modal-title');
  var $modal_body = $modal.find('.modal-body');
  var old_title = $modal_title.text();
  var old_body = $modal_body.html();

  $modal.one('hidden.bs.modal', function() {
    $modal_title.text(old_title);
    $modal_body.html(old_body);
  });

  $modal_title.text(title);
  $modal_body.html(body)
  return $modal;
}

// Disable form
function disable_form($form, disabled) {
  $form.find('[name], button').prop('disabled', disabled && true);
  return $form;
}
function enable_form($form) {
  return disable_form($form, false);
}

// Enable tooltips
$('[data-toggle="tooltip"]').tooltip();
